<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ajax javascript toidicode.com</title>
    <script>
        var sendajax = function() {
        //Khoi tao doi tuong
        var xhttp = new XMLHttpRequest() || ActiveXObject();
        //Bat su kien thay doi trang thai cuar request
        xhttp.onreadystatechange = function() {
                //Kiem tra neu nhu da gui request thanh cong
                if (this.readyState == 4 && this.status == 200) {
                    //In ra data nhan duoc
                    addData(this.responseXML)
                }
            }
            //cau hinh request
            xhttp.open('GET', 'https://toidicode.com/live/php/relationships.xml', true);
        //cau hinh header cho request
        xhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        //gui request
        xhttp.send('data=true');
    }

    var addData = function(data) {
        //Tao cau truc table
        var table = '<table border="1" cellspacing="5" cellpadding="5" style="border-collapse:collapse"><tr><th>ID</th><th>Name</th><th>Age</th><th>Location</th></tr>';
        //Tim node sister trong xml tra ve
        var sister = data.getElementsByTagName('sister');
        //Lap het cac nde tim duoc
        for (i = 0; i < sister.length; i++) {
            //Lay du lieu trong node
            table += '<tr><td>' + (i + 1) + '</td>';
            table += '<td>' + sister[i].getElementsByTagName('name')[0].childNodes[0].nodeValue + '</td>';
            table += '<td>' + sister[i].getElementsByTagName('age')[0].childNodes[0].nodeValue + '</td>';
            table += '<td>' + sister[i].getElementsByTagName('location')[0].childNodes[0].nodeValue + '</td></tr>'
        }
        document.getElementById('result').innerHTML = table;
    }
</script>
</head>

<body>
    <p>Click vào button để xem két quả</p>
    <button type="button" onclick="sendajax()">Click</button>
    <p id="result"></p>
    <div class="table-responsive">
                    <table class="timetable_sub">
                        <thead>
                            <tr>
                                <th>Thứ tự</th>
                                <th>Tên cửa hàng</th>
                                <th>Sản phẩm</th>
                                <th>Tên sản phẩm</th>
                                <th>Chấp thuận</th>
                                <th>Loại bỏ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="rem1" id = "sp1">
                                <td class="invert">1</td>
                                <td id = "name">A 1</td>
                                <td class="invert-image" id = "img">
                                    <a href="single.html">
                                        <img src="images/a.jpg" alt=" " class="img-responsive">
                                    </a>
                                </td>
                                <td class="invert" id = "nameproduct">Back Cover</td>
                                <td class="invert">
                                        <div class="add">
                                        <input type="submit" name="addproduct" value = "Đồng ý" onclick= 'emailERR("ko")'></div>
                                </td>
                                <td class="invert">
                                    <div class="rem">
                                        <div class="close1"> </div>
                                    </div>
                                </td>
                                <input type="hidden" name="" id = "#">
                            </tr>
                            <tr class="rem2" id = "sp2">
                                <td class="invert">2</td>
                                <td>A 2</td>
                                <td class="invert-image">
                                    <a href="single2.html">
                                        <img src="images/a4.jpg" alt=" " class="img-responsive">
                                    </a>
                                </td>
                                <td class="invert">Cordless Trimmer</td>
                                <td class="invert">
                                        <div class="add">
                                        <input type="submit" name="addproduct" value = "Đồng ý"></div>
                                </td>
                                <td class="invert">
                                    <div class="rem">
                                        <div class="close2"> </div>
                                    </div>
                                </td>
                            </tr>
                            <tr class="rem3" id = "sp3">
                                <td class="invert">3</td>
                                <td>A 3</td>
                                <td class="invert-image">
                                    <a href="single.html">
                                        <img src="images/a3.jpg" alt=" " class="img-responsive">
                                    </a>
                                </td>
                                <td class="invert">Nikon Camera</td>
                                <td class="invert">
                                        <div class="add">
                                        <input type="submit" name="addproduct" value = "Đồng ý"></div>
                                </td>
                                <td class="invert">
                                    <div class="rem">
                                        <div class="close3"> </div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
</body>

</html>
            